<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reading Builder | Periplo</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìñ</text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
        "react/jsx-runtime": "https://esm.sh/react@18.2.0/jsx-runtime",
        "lucide-react": "https://esm.sh/lucide-react@0.263.1",
        "firebase/app": "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js",
        "firebase/firestore": "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"
      }
    }
    </script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800;900&display=swap'); 
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #f8fafc; height: 100vh; overflow: hidden; }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel" data-type="module">
        import React, { useState, useEffect } from 'react';
        import { createRoot } from 'react-dom/client';
        import { initializeApp } from 'firebase/app';
        import { getFirestore, collection, addDoc, updateDoc, doc, getDoc, serverTimestamp } from 'firebase/firestore';
        import { BookOpen, Sparkles, Save, ArrowLeft, Globe, Feather, Briefcase, HeartHandshake, Loader2, Search, Lightbulb, Image as ImageIcon, X, Link as LinkIcon, HelpCircle } from 'lucide-react';

        const firebaseConfig = { apiKey: "AIzaSyD4d-Kx1jQbgrKIdeOftv7BM729m7MIGPo", authDomain: "proyecto-periplo.firebaseapp.com", projectId: "proyecto-periplo", storageBucket: "proyecto-periplo.firebasestorage.app", messagingSenderId: "236795998392", appId: "1:236795998392:web:0da24b4f018611b55c844d" };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        const GENRES = {
            "Real World": [
                { id: 'biography', label: 'Biography (Real Person)', icon: Globe },
                { id: 'news', label: 'Breaking News / Current Events', icon: Globe },
                { id: 'travel', label: 'Travel Guide (Real Place)', icon: Globe }
            ],
            "Professional": [
                { id: 'advice', label: 'Advice / Consultation', icon: HeartHandshake, desc: 'Dilemas complejos' },
                { id: 'email', label: 'Email / Letter', icon: Briefcase },
                { id: 'interview', label: 'Job Interview Simulation', icon: Briefcase }
            ],
            "Creative": [
                { id: 'story', label: 'Short Story', icon: Feather },
                { id: 'dialogue', label: 'Dialogue / Script', icon: Feather },
                { id: 'anecdote', label: 'Funny Anecdote', icon: Feather },
                { id: 'grammar_check', label: 'Grammar Check', icon: Feather, desc: 'ESL Standard (A1-C2)' }
            ]
        };

        const ReadingBuilder = () => {
            const [step, setStep] = useState('config'); 
            const [loading, setLoading] = useState(false);
            const [apiKey, setApiKey] = useState(localStorage.getItem('periplo_google_key') || '');
            const [parentPath, setParentPath] = useState('');
            const [editingId, setEditingId] = useState(null);
            
            const [availableModels, setAvailableModels] = useState([]);
            const [selectedModel, setSelectedModel] = useState('');
            const [isLoadingModels, setIsLoadingModels] = useState(false);
            
            const [config, setConfig] = useState({ level: 'Basic', genre: 'biography', topic: '' });
            const [readingData, setReadingData] = useState({ title: '', content: '', fun_fact: '', image_url: '', tokens: [], questions: [] });

            useEffect(() => {
                const init = async () => {
                    const params = new URLSearchParams(window.location.search);
                    const folder = params.get('folder');
                    if (folder && folder !== 'undefined' && folder !== 'null') setParentPath(decodeURIComponent(folder));
                    const editId = params.get('edit');
                    if (editId) {
                        try {
                            const docSnap = await getDoc(doc(db, 'artifacts/periplo-app-v1/users/teacher_builder_001/quizzes', editId));
                            if (docSnap.exists()) {
                                const data = docSnap.data();
                                setReadingData({
                                    title: data.title, content: data.content.text, fun_fact: data.content.fun_fact || "", 
                                    image_url: data.content.image_url || "", questions: data.content.questions || [],
                                    tokens: processContent(data.content.text, [], data.content.blanks)
                                });
                                setConfig(prev => ({ ...prev, level: data.level, genre: data.genre }));
                                setEditingId(editId);
                                setStep('editor');
                            }
                        } catch (e) { console.error(e); }
                    }
                };
                init();
            }, []);

            const cleanWord = (w) => w.toLowerCase().replace(/[^a-z0-9√°√©√≠√≥√∫√±]/g, '');

            const processContent = (text, suggestions = [], existingBlanks = []) => {
                const regex = /([a-zA-Z0-9'√°√©√≠√≥√∫√±√Å√â√ç√ì√ö√ë]+|[^a-zA-Z0-9'√°√©√≠√≥√∫√±√Å√â√ç√ì√ö√ë\s]+|\s+)/g;
                const parts = text.match(regex) || [];
                let tokens = parts.map((part, index) => ({ id: index, text: part, isWord: /^[a-zA-Z0-9'√°√©√≠√≥√∫√±√Å√â√ç√ì√ö√ë]+$/.test(part), isHidden: existingBlanks.includes(index), isSuggested: false }));

                if (suggestions.length > 0) {
                    suggestions.forEach(sug => {
                        const sugWords = sug.split(' ').map(cleanWord).filter(w => w);
                        for (let i = 0; i < tokens.length; i++) {
                            if (!tokens[i].isWord) continue;
                            let match = true; let tokenIdx = i; let matchedTokens = [];
                            for (let j = 0; j < sugWords.length; j++) {
                                while(tokenIdx < tokens.length && !tokens[tokenIdx].isWord) tokenIdx++;
                                if (tokenIdx >= tokens.length || cleanWord(tokens[tokenIdx].text) !== sugWords[j]) { match = false; break; }
                                matchedTokens.push(tokenIdx); tokenIdx++;
                            }
                            if (match) matchedTokens.forEach(idx => tokens[idx].isSuggested = true);
                        }
                    });
                }
                return tokens;
            };

            const fetchModels = async () => {
                if (!apiKey) return alert("Ingresa tu API Key primero");
                setIsLoadingModels(true);
                try {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${apiKey}`);
                    if (!response.ok) throw new Error("Error conectando con Google");
                    const data = await response.json();
                    const validModels = data.models.filter(m => m.supportedGenerationMethods?.includes("generateContent")).map(m => m.name);
                    setAvailableModels(validModels);
                    if (validModels.length > 0) setSelectedModel(validModels.find(m => m.includes("gemini-1.5-flash")) || validModels[0]);
                } catch (e) { alert(e.message); } finally { setIsLoadingModels(false); }
            };

            const generateReading = async () => {
                if (!apiKey) return alert("Falta API Key");
                if (!selectedModel) return alert("Selecciona un modelo primero");
                setLoading(true);

                const needsSearch = GENRES["Real World"].some(g => g.id === config.genre);
                
                let levelInstructions = "Focus on making the text highly engaging, natural, and entertaining for a general audience. Do not restrict vocabulary to basic ESL levels.";
                if (config.genre === 'grammar_check') {
                    if(config.level === 'Basic') levelInstructions = "GRAMMAR FOCUS: CEFR A1/A2. Use simple vocabulary and basic present/past simple structures. Short clear sentences.";
                    else if(config.level === 'Advanced') levelInstructions = "GRAMMAR FOCUS: CEFR B1/B2. Use moderate complexity, past narrative tenses, perfect tenses, and some conditionals.";
                    else levelInstructions = "GRAMMAR FOCUS: CEFR C1/C2. Use rich, sophisticated vocabulary, passive voice, advanced phrasal verbs, and complex clauses.";
                }

                // INYECCI√ìN DE ESTRUCTURA PARA BIOGRAF√çA
                let genreInstructions = "";
                if(config.genre === 'biography') {
                    genreInstructions = `
                        Must be a 4-paragraph biography following this EXACT structure:
                        Paragraph 1: Early life and formation (Focus on what shaped their career and context, e.g., musical roots for musicians, street smarts, poverty, etc. Ignore irrelevant boring schooling).
                        Paragraph 2: Rise to fame and main achievements / why they are famous.
                        Paragraph 3: Polemics, controversies, or their biggest struggles.
                        Paragraph 4: Current life and future plans, OR legacy/after fame to death.
                    `;
                }
                else if(config.genre === 'advice') genreInstructions = "Present a complex moral or professional dilemma, nuanced pros and cons, and a final advice. Avoid trivial problems.";
                else if(config.genre === 'interview' || config.genre === 'dialogue') genreInstructions = "Use Script format (e.g., 'Interviewer: ...'). Use new lines for each speaker turn.";

                const prompt = `
                    Generate an English reading text. 
                    Genre: ${config.genre}. ${genreInstructions}
                    Topic: ${config.topic || "Choose an engaging topic relevant to the genre."}
                    ${levelInstructions}

                    MANDATORY JSON OUTPUT FORMAT:
                    {
                        "title": "Title here",
                        "content": "Full text body here. Use \\n\\n to separate paragraphs.",
                        "fun_fact": "A short, mind-blowing 'Did You Know?' fact related to the topic.",
                        "suggested_words_to_blank": ["verb1", "phrasal verb", "key noun"],
                        "questions": [
                            { "q": "Question asking for a specific detail?", "a": "Short answer", "paragraph_index": 0 }
                        ]
                    }

                    Rules:
                    - 'suggested_words_to_blank' MUST contain 5-8 key vocabulary words or verbs actually present in the text.
                    - 'questions' MUST contain exactly 3 reading comprehension questions. 'paragraph_index' is a 0-based integer indicating which paragraph contains the answer.
                    - You MUST include the 'fun_fact' in English.
                    ${needsSearch ? "IMPORTANT: USE THE GOOGLE SEARCH TOOL to ensure facts are accurate." : ""}
                    RETURN ONLY RAW JSON.
                `;

                try {
                    const tools = needsSearch ? [{ googleSearch: {} }] : [];
                    const generationConfig = needsSearch ? {} : { responseMimeType: "application/json" };
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/${selectedModel}:generateContent?key=${apiKey}`, {
                        method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }], tools, generationConfig })
                    });
                    const data = await response.json();
                    if(data.error) throw new Error(data.error.message);
                    
                    let text = data.candidates[0].content.parts[0].text.replace(/```json|```/g, "").trim(); 
                    const result = JSON.parse(text);
                    
                    setReadingData({
                        title: result.title, content: result.content, fun_fact: result.fun_fact || "", image_url: "", 
                        questions: result.questions || [], tokens: processContent(result.content, result.suggested_words_to_blank || [])
                    });
                    setStep('editor');
                } catch (e) { alert("Error: " + e.message); console.error(e); } finally { setLoading(false); }
            };

            const saveActivity = async () => {
                if (!readingData.title) return alert("Falta t√≠tulo");
                try {
                    const payload = {
                        title: readingData.title, type: 'READING', level: config.level, genre: config.genre, parentPath: parentPath,
                        content: { text: readingData.content, fun_fact: readingData.fun_fact, image_url: readingData.image_url, blanks: readingData.tokens.filter(t => t.isHidden).map(t => t.id), questions: readingData.questions }
                    };
                    if (editingId) await updateDoc(doc(db, 'artifacts/periplo-app-v1/users/teacher_builder_001/quizzes', editingId), { ...payload, updatedAt: serverTimestamp() }); 
                    else await addDoc(collection(db, 'artifacts', 'periplo-app-v1', 'users', 'teacher_builder_001', 'quizzes'), { ...payload, createdAt: serverTimestamp() }); 
                    window.location.href = parentPath ? `index.html?folder=${encodeURIComponent(parentPath)}` : 'index.html';
                } catch (e) { alert("Error guardando: " + e.message); }
            };

            const toggleHidden = (idx) => {
                const newTokens = [...readingData.tokens];
                if (newTokens[idx].isWord) { newTokens[idx].isHidden = !newTokens[idx].isHidden; setReadingData({ ...readingData, tokens: newTokens }); }
            };

            const handleImageDrop = (e) => {
                e.preventDefault();
                const html = e.dataTransfer.getData('text/html');
                const uri = e.dataTransfer.getData('text/plain') || e.dataTransfer.getData('text/uri-list');
                let foundUrl = '';
                if (html) {
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, 'text/html');
                    const img = doc.querySelector('img');
                    if (img) foundUrl = img.src;
                }
                if (!foundUrl && uri) foundUrl = uri;
                if (foundUrl) setReadingData({ ...readingData, image_url: foundUrl });
                else alert("No se detect√≥ una imagen v√°lida.");
            };

            return (
                <div className="min-h-screen bg-slate-50 font-sans">
                    {step === 'config' ? (
                        <div className="max-w-5xl mx-auto p-6 flex flex-col h-screen">
                            <div className="bg-slate-900 p-6 rounded-t-3xl text-white flex justify-between items-center shrink-0">
                                <div><h1 className="text-2xl font-black flex items-center gap-2"><BookOpen className="text-emerald-400"/> Reading Builder</h1><p className="text-slate-400 text-xs uppercase font-bold tracking-widest mt-1">Motor de Generaci√≥n IA</p></div>
                                <div className="flex items-center gap-2"><button onClick={() => window.location.href='index.html'} className="p-2 hover:bg-slate-800 rounded-lg transition-colors"><ArrowLeft/></button><input type="password" value={apiKey} onChange={e => {setApiKey(e.target.value); localStorage.setItem('periplo_google_key', e.target.value)}} className="bg-slate-800 rounded-lg px-3 py-2 text-xs w-28 focus:outline-none focus:ring-2 focus:ring-emerald-500 text-center" placeholder="API Key"/><button onClick={fetchModels} disabled={isLoadingModels || !apiKey} className="p-2 bg-emerald-600 hover:bg-emerald-500 rounded-lg"><Search size={16}/></button>{availableModels.length > 0 && (<select value={selectedModel} onChange={e => setSelectedModel(e.target.value)} className="bg-slate-800 rounded-lg px-2 py-2 text-xs text-white max-w-[120px]">{availableModels.map(m => <option key={m} value={m}>{m.replace('models/', '')}</option>)}</select>)}</div>
                            </div>
                            
                            <div className="flex flex-1 overflow-hidden bg-white border-x border-b border-slate-200 rounded-b-3xl shadow-xl">
                                {/* LEFT: CONFIG */}
                                <div className="w-1/2 p-6 border-r border-slate-100 flex flex-col">
                                    <label className="text-xs font-black text-slate-400 uppercase tracking-widest mb-3">G√©nero de Lectura</label>
                                    <div className="flex-1 overflow-y-auto custom-scrollbar pr-2 space-y-6">
                                        {Object.entries(GENRES).map(([cat, items]) => (
                                            <div key={cat}><p className="text-[10px] font-black text-slate-300 uppercase mb-2 tracking-widest">{cat}</p>
                                                <div className="space-y-2">
                                                    {items.map(g => (
                                                        <button key={g.id} onClick={() => setConfig({...config, genre: g.id})} className={`w-full text-left p-4 rounded-xl border flex items-center justify-between transition-all ${config.genre === g.id ? 'bg-emerald-50 border-emerald-400 text-emerald-900 ring-1 ring-emerald-400' : 'bg-white border-slate-200 text-slate-600 hover:border-slate-300'}`}>
                                                            <div className="flex items-center gap-3"><g.icon size={18} className={config.genre === g.id ? 'text-emerald-600' : 'text-slate-400'}/><div><div className="font-bold text-sm">{g.label}</div>{g.desc && <div className="text-[10px] opacity-70">{g.desc}</div>}</div></div>
                                                        </button>
                                                    ))}
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                {/* RIGHT: TOPIC & GEN */}
                                <div className="w-1/2 p-6 bg-slate-50 flex flex-col relative overflow-y-auto">
                                    {config.genre === 'grammar_check' && (
                                        <div className="mb-6 animate-in fade-in slide-in-from-top-4">
                                            <label className="text-xs font-black text-indigo-400 uppercase tracking-widest mb-3 flex items-center gap-2"><CheckCircle2 size={16}/> Est√°ndar CEFR</label>
                                            <div className="flex gap-2 bg-white p-1.5 rounded-xl border border-indigo-100 shadow-sm">
                                                {['Basic', 'Advanced', 'Pro'].map(l => (
                                                    <button key={l} onClick={() => setConfig({...config, level: l})} className={`flex-1 py-3 text-sm font-bold rounded-lg transition-all ${config.level===l ? 'bg-indigo-500 text-white shadow-md' : 'text-slate-500 hover:bg-slate-50'}`}>{l}</button>
                                                ))}
                                            </div>
                                        </div>
                                    )}

                                    <label className="text-xs font-black text-slate-400 uppercase tracking-widest mb-3">Tema Espec√≠fico (Opcional)</label>
                                    <textarea value={config.topic} onChange={e => setConfig({...config, topic: e.target.value})} className="w-full flex-1 min-h-[150px] bg-white border border-slate-200 rounded-2xl p-4 outline-none focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500 resize-none font-medium text-slate-700 placeholder-slate-300" placeholder="Ej: Biograf√≠a de Marie Curie, Un dilema sobre robar wifi en la oficina..."></textarea>
                                    
                                    <button onClick={generateReading} disabled={loading || !selectedModel} className="w-full mt-6 py-5 bg-slate-900 text-white rounded-2xl font-black uppercase tracking-widest hover:bg-emerald-600 transition-all flex items-center justify-center gap-3 disabled:opacity-50 shadow-xl hover:-translate-y-1 shrink-0">
                                        {loading ? <Loader2 className="animate-spin"/> : <Sparkles className="text-yellow-400"/>} {loading ? "Construyendo Lectura..." : "Generar con Gemini"}
                                    </button>
                                </div>
                            </div>
                        </div>
                    ) : (
                        <div className="max-w-5xl mx-auto p-6 h-screen flex flex-col">
                            <div className="bg-white p-4 rounded-t-3xl border border-slate-200 flex justify-between items-center shrink-0">
                                <div className="flex items-center gap-4"><button onClick={() => setStep('config')} className="p-2 bg-slate-100 hover:bg-slate-200 rounded-full"><ArrowLeft size={20}/></button><div><h2 className="font-black text-lg">Editor de Huecos</h2><p className="text-[10px] text-slate-400 font-bold uppercase tracking-widest">Las palabras amarillas son sugerencias de la IA</p></div></div>
                                <button onClick={saveActivity} className="bg-emerald-500 hover:bg-emerald-600 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 shadow-lg"><Save size={18}/> Guardar Final</button>
                            </div>
                            
                            <div className="flex-1 overflow-y-auto bg-white border-x border-b border-slate-200 p-8 rounded-b-3xl">
                                <input value={readingData.title} onChange={e => setReadingData({...readingData, title: e.target.value})} className="text-4xl font-black w-full border-none outline-none mb-8 bg-transparent" placeholder="T√≠tulo..."/>
                                
                                <div className="mb-8 space-y-2">
                                    {!readingData.image_url ? (
                                        <div onDrop={handleImageDrop} onDragOver={e=>e.preventDefault()} className="rounded-2xl border-2 border-dashed border-slate-300 bg-slate-50 hover:bg-indigo-50 hover:border-indigo-300 transition-colors p-8 relative flex flex-col items-center justify-center text-slate-400 cursor-pointer">
                                            <ImageIcon size={32} className="mb-3"/>
                                            <span className="text-sm font-bold uppercase tracking-widest">Arrastra una imagen de Google aqu√≠</span>
                                        </div>
                                    ) : (
                                        <div className="relative w-full h-64 rounded-2xl overflow-hidden group border-4 border-slate-100 shadow-sm">
                                            <img src={readingData.image_url} className="w-full h-full object-cover"/>
                                            <button onClick={() => setReadingData({...readingData, image_url: ''})} className="absolute top-4 right-4 bg-black/70 text-white p-2 rounded-full hover:bg-red-500 transition-colors z-10 backdrop-blur"><X size={18}/></button>
                                        </div>
                                    )}
                                    {!readingData.image_url && (
                                        <div className="flex items-center gap-2 bg-white border border-slate-200 rounded-xl px-4 py-3">
                                            <LinkIcon size={16} className="text-slate-400"/>
                                            <input value={readingData.image_url} onChange={e => setReadingData({...readingData, image_url: e.target.value})} className="w-full text-sm outline-none text-slate-700 font-medium" placeholder="O pega el enlace directo a la imagen aqu√≠..."/>
                                        </div>
                                    )}
                                </div>

                                {/* APLICADO TEXT-JUSTIFY AQU√ç */}
                                <div className="text-lg text-slate-800 bg-slate-50 p-8 md:p-12 rounded-[2rem] border border-slate-100 shadow-inner leading-[2.5rem] mb-8 text-justify">
                                    {readingData.tokens.map((t, i) => {
                                        const prevHidden = i > 0 && readingData.tokens[i-1].isHidden && readingData.tokens[i-1].isWord;
                                        const nextHidden = i < readingData.tokens.length - 1 && readingData.tokens[i+1].isHidden && readingData.tokens[i+1].isWord;
                                        
                                        let classes = "inline-block px-0.5 cursor-pointer transition-colors border-b-2 select-none ";
                                        
                                        if (t.isHidden) {
                                            classes += "bg-emerald-100 text-emerald-900 border-emerald-400 font-black ";
                                            if (!prevHidden) classes += "rounded-l-lg pl-2 border-l-2 "; 
                                            if (!nextHidden) classes += "rounded-r-lg pr-2 border-r-2 "; 
                                            if (prevHidden && nextHidden) classes += "border-x-0 "; 
                                            classes += "mx-0 "; 
                                        } else if (t.isWord) {
                                            classes += "border-transparent mx-[1px] rounded hover:bg-slate-200 ";
                                            if (t.isSuggested) classes += "ring-2 ring-amber-300 bg-amber-50 animate-pulse text-amber-900 font-bold ";
                                        } else {
                                            if (t.text.match(/\n/)) return <br key={i}/>;
                                            classes = "inline-block "; 
                                        }

                                        return <span key={i} onClick={() => toggleHidden(i)} className={classes}>{t.text}</span>;
                                    })}
                                </div>

                                {readingData.fun_fact && (
                                    <div className="bg-amber-50 border-l-4 border-amber-400 p-6 rounded-r-2xl mb-8 flex gap-4 items-start shadow-sm">
                                        <div className="bg-amber-100 p-2 rounded-full text-amber-600 shrink-0"><Lightbulb size={24}/></div>
                                        <textarea value={readingData.fun_fact} onChange={e => setReadingData({...readingData, fun_fact: e.target.value})} className="w-full bg-transparent border-none outline-none text-amber-900 font-medium resize-none" rows={3}/>
                                    </div>
                                )}

                                <div className="bg-indigo-50 border border-indigo-100 p-8 rounded-[2rem]">
                                    <h4 className="font-black text-indigo-800 uppercase tracking-widest text-xs mb-6 flex items-center gap-2"><HelpCircle size={16}/> Preguntas Post-Reading Generadas</h4>
                                    <div className="space-y-4">
                                        {readingData.questions.map((q, i) => (
                                            <div key={i} className="bg-white p-5 rounded-2xl shadow-sm border border-indigo-50">
                                                <p className="font-bold text-slate-800">{i+1}. {q.q}</p>
                                                <p className="text-sm text-indigo-600 font-medium mt-1">R: {q.a} <span className="opacity-50 text-slate-400 text-xs ml-2">(P√°rrafo {q.paragraph_index + 1})</span></p>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };
        const root = createRoot(document.getElementById('root'));
        root.render(<ReadingBuilder />);
    </script>
</body>
</html>
