<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>City Map Trainer</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
        "lucide-react": "https://esm.sh/lucide-react@0.263.1"
      }
    }
    </script>
    
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;700;800&display=swap'); 
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #0f172a; margin: 0; overflow: hidden; }
        /* Animaciones suaves para el mapa */
        .map-container { will-change: transform; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import React, { useState, useRef, useEffect } from 'react';
        import { createRoot } from 'react-dom/client';
        import { 
            MapPin, Building2, ShoppingBag, Utensils, Stethoscope, 
            GraduationCap, Trees, Plane, Car, 
            Dumbbell, Cross, Landmark, Waves, Factory, Home,
            Video, Palmtree, Warehouse, Scissors, Flame, Briefcase,
            ZoomIn, ZoomOut, Maximize, Navigation, Repeat, Move,
            Coffee, Pizza, Bike, Bus, Ticket, Music, AlertCircle
        } from 'lucide-react';

        const CityMapTrainer = () => {
            const [startPlace, setStartPlace] = useState(null);
            const [endPlace, setEndPlace] = useState(null);
            
            // Ajuste inicial: Zoom 0.6 para ver más mapa al inicio
            const [zoom, setZoom] = useState(0.6);
            // Pan inicial: Centrado aproximado
            const [pan, setPan] = useState({ x: 0, y: 0 });
            
            const [isDragging, setIsDragging] = useState(false);
            const [dragStart, setDragStart] = useState({ x: 0, y: 0 });
            const [showAltRoute, setShowAltRoute] = useState(false);
            
            const mapRef = useRef(null);
            const containerRef = useRef(null);

            // --- CONFIGURACIÓN DE DATOS ---

            const colors = {
                medical: "bg-red-50 border-red-500 text-red-900",
                commercial: "bg-blue-50 border-blue-500 text-blue-900",
                service: "bg-yellow-50 border-yellow-500 text-yellow-900",
                leisure: "bg-emerald-50 border-emerald-500 text-emerald-900",
                transport: "bg-slate-100 border-slate-500 text-slate-900",
                residential: "bg-indigo-50 border-indigo-500 text-indigo-900",
                industrial: "bg-orange-50 border-orange-500 text-orange-900"
            };

            const avenues = ["Lincoln Ave", "Broadway", "Sunset Blvd", "Park Ln"];

            const cityRows = [
                {
                streetName: "Industrial Hwy",
                places: [
                    { id: 'airport', name: 'Airport', icon: Plane, type: 'transport', width: 'col-span-2', neighbors: [{name: 'Car Rental', color: 'bg-blue-200'}, {name: 'Cargo', color: 'bg-slate-300'}] },
                    { id: 'factory', name: 'Factory', icon: Factory, type: 'industrial', width: 'col-span-1', neighbors: [{name: 'Storage', color: 'bg-orange-200'}] },
                    { id: 'warehouse', name: 'Warehouse', icon: Warehouse, type: 'industrial', width: 'col-span-1', neighbors: [{name: 'Loading Dock', color: 'bg-slate-400'}] },
                ]
                },
                {
                streetName: "North Ave",
                places: [
                    { id: 'hotel', name: 'Hotel', icon: Building2, type: 'commercial', width: 'col-span-1', neighbors: [{name: 'Taxi Stand', color: 'bg-yellow-200'}] },
                    { id: 'bank', name: 'Bank', icon: Landmark, type: 'service', width: 'col-span-1', neighbors: [{name: 'ATM', color: 'bg-green-100'}] },
                    { id: 'office', name: 'Office', icon: Briefcase, type: 'commercial', width: 'col-span-1', neighbors: [{name: 'Copy Shop', color: 'bg-blue-200'}] },
                    { id: 'museum', name: 'Museum', icon: Landmark, type: 'leisure', width: 'col-span-1', neighbors: [{name: 'Gift Shop', color: 'bg-pink-200'}] },
                ]
                },
                {
                streetName: "University Dr",
                places: [
                    { id: 'university', name: 'University', icon: GraduationCap, type: 'leisure', width: 'col-span-1', neighbors: [{name: 'Bookstore', color: 'bg-amber-100'}] },
                    { id: 'library', name: 'Library', icon: Building2, type: 'leisure', width: 'col-span-1', neighbors: [{name: 'Cafe', color: 'bg-amber-800 text-white'}] },
                    { id: 'park', name: 'Central Park', icon: Trees, type: 'leisure', width: 'col-span-2', neighbors: [{name: 'Pond', color: 'bg-blue-300'}, {name: 'Playground', color: 'bg-green-200'}] },
                ]
                },
                {
                streetName: "Main St",
                places: [
                    { id: 'hospital', name: 'Hospital', icon: Stethoscope, type: 'medical', width: 'col-span-1', neighbors: [{name: 'ER', color: 'bg-red-200'}] },
                    { id: 'clinic', name: 'Clinic', icon: Stethoscope, type: 'medical', width: 'col-span-1', neighbors: [{name: 'Optics', color: 'bg-white'}] },
                    { id: 'pharmacy', name: 'Pharmacy', icon: Cross, type: 'medical', width: 'col-span-1', neighbors: [{name: 'Convenience', color: 'bg-green-100'}] },
                    { id: 'gym', name: 'Gym', icon: Dumbbell, type: 'leisure', width: 'col-span-1', neighbors: [{name: 'Juice Bar', color: 'bg-orange-200'}] },
                ]
                },
                {
                streetName: "Commerce Blvd",
                places: [
                    { id: 'mall', name: 'Mall', icon: ShoppingBag, type: 'commercial', width: 'col-span-2', neighbors: [{name: 'Parking Lot', color: 'bg-slate-400 border-dashed border-white'}, {name: 'Food Truck', color: 'bg-red-200'}] },
                    { id: 'cinema', name: 'Cinema', icon: Video, type: 'leisure', width: 'col-span-1', neighbors: [{name: 'Arcade', color: 'bg-purple-200'}] },
                    { id: 'restaurant', name: 'Restaurant', icon: Utensils, type: 'commercial', width: 'col-span-1', neighbors: [{name: 'Valet', color: 'bg-slate-200'}] },
                ]
                },
                {
                streetName: "Service Rd",
                places: [
                    { id: 'gas', name: 'Gas Station', icon: Car, type: 'transport', width: 'col-span-1', neighbors: [{name: 'Car Wash', color: 'bg-blue-200'}] },
                    { id: 'mechanic', name: 'Mechanic', icon: Car, type: 'service', width: 'col-span-1', neighbors: [{name: 'Tires', color: 'bg-black text-white'}] },
                    { id: 'fire', name: 'Fire Station', icon: Flame, type: 'service', width: 'col-span-1', neighbors: [{name: 'Hydrant', color: 'bg-red-600 text-white'}] },
                    { id: 'police', name: 'Police', icon: Building2, type: 'service', width: 'col-span-1', neighbors: [{name: 'Jail', color: 'bg-slate-400'}] },
                ]
                },
                {
                streetName: "Residential Ln",
                places: [
                    { id: 'house', name: 'My House', icon: Home, type: 'residential', width: 'col-span-1', neighbors: [{name: 'Garage', color: 'bg-slate-200'}] },
                    { id: 'school', name: 'School', icon: GraduationCap, type: 'leisure', width: 'col-span-1', neighbors: [{name: 'Playground', color: 'bg-green-200'}] },
                    { id: 'daycare', name: 'Daycare', icon: Palmtree, type: 'residential', width: 'col-span-1', neighbors: [{name: 'Garden', color: 'bg-green-300'}] },
                    { id: 'salon', name: 'Salon', icon: Scissors, type: 'service', width: 'col-span-1', neighbors: [{name: 'Spa', color: 'bg-pink-100'}] },
                ]
                },
                {
                streetName: "Ocean Dr",
                places: [
                    { id: 'church', name: 'Church', icon: Home, type: 'leisure', width: 'col-span-1', neighbors: [{name: 'Parking', color: 'bg-slate-300'}] },
                    { id: 'cemetery', name: 'Cemetery', icon: Cross, type: 'residential', width: 'col-span-1', neighbors: [{name: 'Florist', color: 'bg-pink-200'}] },
                    { id: 'zoo', name: 'City Zoo', icon: Trees, type: 'leisure', width: 'col-span-1', neighbors: [{name: 'Ice Cream', color: 'bg-white'}] },
                    { id: 'beach', name: 'The Beach', icon: Waves, type: 'leisure', width: 'col-span-1', neighbors: [{name: 'Lifeguard', color: 'bg-red-500 text-white'}] },
                ]
                }
            ];

            // --- LÓGICA DE NAVEGACIÓN Y ZOOM ---

            const handleZoomIn = () => setZoom(prev => Math.min(prev + 0.1, 3));
            const handleZoomOut = () => setZoom(prev => Math.max(prev - 0.1, 0.4));
            
            const handleResetZoom = () => {
                setZoom(0.6);
                setPan({ x: 0, y: 0 }); // Reset al centro (0,0 es el top-left, lo ajustamos visualmente al inicio)
            };

            // --- LÓGICA DE DRAG & DROP (PANNING) ---
            
            const handleMouseDown = (e) => {
                if (e.target.closest('button')) return; // Ignorar si clickea botones
                setIsDragging(true);
                setDragStart({ x: e.clientX - pan.x, y: e.clientY - pan.y });
            };

            const handleMouseMove = (e) => {
                if (!isDragging) return;
                setPan({
                x: e.clientX - dragStart.x,
                y: e.clientY - dragStart.y
                });
            };

            const handleMouseUp = () => {
                setIsDragging(false);
            };

            const handleMouseLeave = () => {
                setIsDragging(false);
            };

            // --- LÓGICA DE SELECCIÓN DE LUGARES Y COORDENADAS ---

            const handlePlaceClick = (place, e) => {
                e.stopPropagation();

                // NUEVO ALGORITMO DE COORDENADAS:
                // Al usar transform-origin: top left, el cálculo es mucho más estable.
                if (!mapRef.current) return;
                
                const mapRect = mapRef.current.getBoundingClientRect();
                const elemRect = e.currentTarget.getBoundingClientRect();
                
                // Convertimos la posición de pantalla (elemRect) a coordenadas internas del mapa
                // 1. Restamos el offset del mapa (mapRect.left)
                // 2. Dividimos por el zoom actual para obtener "pixeles CSS reales"
                const relX = (elemRect.left - mapRect.left + elemRect.width / 2) / zoom;
                const relY = (elemRect.top - mapRect.top + elemRect.height) / zoom; // Parte inferior del edificio

                const placeData = { ...place, x: relX, y: relY };

                if (!startPlace) {
                setStartPlace(placeData);
                } else if (!endPlace) {
                if (place.id !== startPlace.id) {
                    setEndPlace(placeData);
                }
                } else {
                setStartPlace(placeData);
                setEndPlace(null);
                setShowAltRoute(false);
                }
            };

            const handleReset = () => {
                setStartPlace(null);
                setEndPlace(null);
                setShowAltRoute(false);
            };

            // --- ALGORITMO DE RUTAS ---

            const renderRoutes = () => {
                if (!startPlace || !endPlace) return null;

                const startX = startPlace.x;
                const startY = startPlace.y + 4; // Ajuste para salir del edificio
                const endX = endPlace.x;
                const endY = endPlace.y + 4;

                const streetOffset = 45; // Distancia para bajar a la calle horizontal

                // Puntos clave
                const pStartDoor = { x: startX, y: startY };
                const pStartStreet = { x: startX, y: startY + streetOffset };
                const pEndDoor = { x: endX, y: endY };
                const pEndStreet = { x: endX, y: endY + streetOffset };

                // --- RUTA PRINCIPAL (Azul) ---
                // Viaja hasta la columna del destino y luego sube/baja
                let primaryVerticalX = endX;
                
                const pathPrimary = `
                M ${pStartDoor.x} ${pStartDoor.y}
                L ${pStartStreet.x} ${pStartStreet.y}
                L ${primaryVerticalX} ${pStartStreet.y}
                L ${primaryVerticalX} ${pEndStreet.y}
                L ${pEndStreet.x} ${pEndStreet.y}
                L ${pEndDoor.x} ${pEndDoor.y}
                `;

                // --- RUTA ALTERNATIVA (Gris) ---
                // Viaja verticalmente primero (usando columna de origen) y luego horizontal
                let altVerticalX = startX;
                
                // Si están en la misma columna vertical, forzamos un desvío
                if (Math.abs(startX - endX) < 50) {
                altVerticalX = startX + 300; // Desvío grande a la derecha
                }

                const pathAlt = `
                M ${pStartDoor.x} ${pStartDoor.y}
                L ${pStartStreet.x} ${pStartStreet.y}
                L ${altVerticalX} ${pStartStreet.y}
                L ${altVerticalX} ${pEndStreet.y}
                L ${pEndStreet.x} ${pEndStreet.y}
                L ${pEndDoor.x} ${pEndDoor.y}
                `;

                return (
                <svg className="absolute inset-0 w-full h-full pointer-events-none z-30 overflow-visible">
                    <defs>
                    <filter id="glow">
                        <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                        <feMerge>
                        <feMergeNode in="coloredBlur"/>
                        <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                    </defs>

                    {/* RUTA ALTERNATIVA (Botón Alt Route) */}
                    {showAltRoute && (
                    <path 
                        d={pathAlt} 
                        stroke="#64748b" 
                        strokeWidth="8" 
                        fill="none" 
                        strokeLinecap="round" 
                        strokeLinejoin="round"
                        strokeDasharray="15 15" 
                        opacity="0.8"
                    />
                    )}

                    {/* RUTA PRINCIPAL (Siempre visible) */}
                    <path d={pathPrimary} stroke="rgba(0,0,0,0.5)" strokeWidth="12" fill="none" strokeLinecap="round" strokeLinejoin="round" opacity="0.3" />
                    <path 
                    d={pathPrimary} 
                    stroke="#3b82f6" 
                    strokeWidth="8" 
                    fill="none" 
                    strokeLinecap="round" 
                    strokeLinejoin="round"
                    filter="url(#glow)"
                    />
                    
                    {/* Puntos de conexión */}
                    <circle cx={pStartDoor.x} cy={pStartDoor.y} r="8" fill="#3b82f6" stroke="white" strokeWidth="2" />
                    <circle cx={pEndDoor.x} cy={pEndDoor.y} r="8" fill="#ef4444" stroke="white" strokeWidth="2" className="animate-pulse" />
                </svg>
                );
            };

            return (
                <div className="h-screen flex flex-col font-sans overflow-hidden bg-slate-900">
                
                {/* --- HUD SUPERIOR (Barra de Control) --- */}
                <div className="bg-slate-900 text-white p-3 shadow-xl flex flex-wrap gap-4 justify-between items-center z-50 px-6 border-b border-slate-700 select-none">
                    <div className="flex items-center gap-3">
                    <div className="bg-blue-600 p-2 rounded-lg text-white shadow-lg">
                        <Navigation size={20} />
                    </div>
                    <div>
                        <h1 className="text-lg font-black tracking-wider uppercase leading-none">City Navigator</h1>
                        <span className="text-[10px] font-bold text-slate-400 tracking-[0.2em] uppercase">Teacher Console</span>
                    </div>
                    </div>

                    {/* Barra de Estado (Start -> End) */}
                    <div className="flex-1 flex justify-center items-center gap-2 md:gap-4 bg-slate-800/50 py-2 px-4 md:px-6 rounded-full border border-slate-700 mx-2">
                        <div className="flex items-center gap-2 min-w-[100px]">
                        <div className={`w-2 h-2 rounded-full ${startPlace ? 'bg-blue-500' : 'bg-slate-600'}`}></div>
                        <span className={`text-xs font-bold uppercase truncate max-w-[120px] ${startPlace ? 'text-blue-400' : 'text-slate-500'}`}>
                            {startPlace ? startPlace.name : 'Click Start'}
                        </span>
                        </div>
                        <div className="text-slate-600">→</div>
                        <div className="flex items-center gap-2 min-w-[100px]">
                        <div className={`w-2 h-2 rounded-full ${endPlace ? 'bg-red-500' : 'bg-slate-600'}`}></div>
                        <span className={`text-xs font-bold uppercase truncate max-w-[120px] ${endPlace ? 'text-red-400' : 'text-slate-500'}`}>
                            {endPlace ? endPlace.name : 'Click End'}
                        </span>
                        </div>
                    </div>

                    {/* BOTONES DE CONTROL (Zoom y Clear) */}
                    <div className="flex gap-2 items-center">
                        {/* Botón Ruta Alternativa */}
                        {startPlace && endPlace && (
                        <button 
                            onClick={() => setShowAltRoute(!showAltRoute)}
                            className={`px-3 py-1.5 rounded text-xs font-bold uppercase border flex items-center gap-1 transition-colors mr-2
                            ${showAltRoute ? 'bg-indigo-600 border-indigo-500 text-white' : 'bg-slate-800 border-slate-600 text-slate-400 hover:text-white'}
                            `}
                        >
                            <Repeat size={14} /> Alt Route
                        </button>
                        )}

                        {/* Botones de Zoom Explícitos */}
                        <div className="flex bg-slate-800 rounded border border-slate-700">
                        <button onClick={handleZoomOut} className="p-2 hover:bg-slate-700 transition-colors text-slate-300 border-r border-slate-700" title="Zoom Out">
                            <ZoomOut size={18} />
                        </button>
                        <button onClick={handleResetZoom} className="p-2 hover:bg-slate-700 transition-colors text-slate-300 border-r border-slate-700 font-mono text-xs w-10" title="Reset 100%">
                            {Math.round(zoom * 100)}%
                        </button>
                        <button onClick={handleZoomIn} className="p-2 hover:bg-slate-700 transition-colors text-slate-300" title="Zoom In">
                            <ZoomIn size={18} />
                        </button>
                        </div>

                        <button onClick={handleReset} className="ml-2 px-3 py-1.5 bg-red-900/40 hover:bg-red-900/80 text-red-200 rounded border border-red-900/50 text-xs font-bold uppercase tracking-wide transition-colors">
                        Clear
                        </button>
                    </div>
                </div>

                {/* --- VIEWPORT (Área Visible) --- */}
                <div 
                    ref={containerRef}
                    className={`flex-1 overflow-hidden relative bg-[#e8e4dc] ${isDragging ? 'cursor-grabbing' : 'cursor-grab'}`}
                    onMouseDown={handleMouseDown}
                    onMouseMove={handleMouseMove}
                    onMouseUp={handleMouseUp}
                    onMouseLeave={handleMouseLeave}
                >
                    {/* Fondo decorativo "Outskirts" */}
                    <div className="absolute inset-0 pointer-events-none opacity-30 bg-[radial-gradient(circle_at_center,_transparent_0%,_#d6cbb6_100%)]"></div>
                    <div className="absolute inset-0 pointer-events-none opacity-10 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"></div>

                    {/* MAPA COMPLETO (Transformable) */}
                    <div 
                    ref={mapRef}
                    className="absolute left-0 top-0 transition-transform duration-75 ease-out origin-top-left"
                    style={{ 
                        // IMPORTANTE: El transform ahora usa coordenadas simples desde top-left (0,0)
                        // Agregamos un padding inicial (100px) para que no empiece pegado al borde
                        transform: `translate(${pan.x + 100}px, ${pan.y + 100}px) scale(${zoom})`, 
                        width: '1300px',
                        height: '1450px' 
                    }}
                    >
                    {/* BORDE DE LA CIUDAD */}
                    <div className="absolute inset-0 bg-[#333] rounded-[40px] shadow-[0_0_100px_rgba(0,0,0,0.2)] border-8 border-[#5c554b]">
                        
                        {/* ASFALTO */}
                        <div className="w-full h-full bg-[#2a2a2a] relative rounded-[32px] overflow-hidden bg-[url('https://www.transparenttextures.com/patterns/asfalt-dark.png')]">
                        
                        {/* Capa de Rutas SVG */}
                        {renderRoutes()}

                        {/* GUIAS DE AVENIDAS VERTICALES */}
                        <div className="absolute inset-0 flex justify-between px-[10%] pointer-events-none">
                            {avenues.map((av, i) => (
                                <div key={i} className="relative w-24 h-full flex justify-center">
                                <div className="h-full border-r-2 border-dashed border-white/10"></div>
                                <div className="absolute top-6 bg-[#2a2a2a] text-slate-400 border border-slate-600 px-2 py-1 rounded text-[10px] font-bold uppercase tracking-[0.2em] shadow-lg z-10 whitespace-nowrap">
                                    {av}
                                </div>
                                <div className="absolute bottom-6 bg-[#2a2a2a] text-slate-400 border border-slate-600 px-2 py-1 rounded text-[10px] font-bold uppercase tracking-[0.2em] shadow-lg z-10 whitespace-nowrap">
                                    {av}
                                </div>
                                </div>
                            ))}
                        </div>

                        {/* GRID DE FILAS */}
                        <div className="flex flex-col gap-28 relative mx-auto max-w-[1200px] mt-24"> 
                            {cityRows.map((row, rowIndex) => (
                            <div key={rowIndex} className="relative">
                                
                                {/* BLOQUES DE EDIFICIOS */}
                                <div className="grid grid-cols-4 gap-24 px-8"> 
                                {row.places.map((place) => {
                                    const isStart = startPlace?.id === place.id;
                                    const isEnd = endPlace?.id === place.id;
                                    
                                    return (
                                    <div key={place.id} className={`${place.width} relative group z-10`}>
                                        {/* ACERA (Sidewalk) */}
                                        <div className="absolute -inset-4 bg-[#d4d4d8] rounded-lg shadow-sm border-t border-white/20"></div>
                                        
                                        {/* EDIFICIOS */}
                                        <div 
                                        onMouseDown={(e) => handlePlaceClick(place, e)}
                                        className={`
                                            relative h-32 w-full flex gap-1 cursor-pointer transition-transform duration-200
                                            ${(isStart || isEnd) ? 'z-20 transform -translate-y-2' : 'hover:-translate-y-1'}
                                        `}
                                        >
                                        {/* Vecino Izquierdo */}
                                        {place.neighbors && place.neighbors[0] && (
                                            <div className={`h-2/3 self-end flex-1 rounded-sm border border-black/10 shadow-sm flex flex-col items-center justify-center p-1 ${place.neighbors[0].color}`}>
                                                <div className="w-full h-full opacity-50 bg-[url('https://www.transparenttextures.com/patterns/brick-wall.png')]"></div>
                                            </div>
                                        )}

                                        {/* EDIFICIO PRINCIPAL */}
                                        <div className={`
                                            flex-[2] h-full rounded-md shadow-lg border border-white/10 flex flex-col items-center justify-start pt-2 relative overflow-hidden
                                            ${colors[place.type]}
                                            ${isStart ? 'ring-4 ring-blue-500' : ''}
                                            ${isEnd ? 'ring-4 ring-red-500' : ''}
                                        `}>
                                            <div className="absolute top-0 w-full h-3 bg-white/20"></div>
                                            <place.icon size={30} className="mb-1 opacity-90 drop-shadow-sm mt-2 relative z-10" />
                                            <span className="font-black text-[11px] leading-tight text-center px-1 w-full truncate bg-white/40 py-1 mt-1 backdrop-blur-md relative z-10">
                                                {place.name}
                                            </span>
                                            <div className="absolute bottom-0 w-12 h-8 bg-black/20 rounded-t border-t border-white/20"></div>
                                        </div>

                                        {/* Vecino Derecho */}
                                        {place.neighbors && place.neighbors[1] ? (
                                            <div className={`h-3/4 self-end flex-1 rounded-sm border border-black/10 shadow-sm flex flex-col items-center justify-center p-1 ${place.neighbors[1].color}`}>
                                                <div className="w-full h-full opacity-50 bg-[url('https://www.transparenttextures.com/patterns/brick-wall.png')]"></div>
                                            </div>
                                        ) : <div className="w-4"></div>}
                                        </div>
                                    </div>
                                    );
                                })}
                                </div>

                                {/* NOMBRE CALLE HORIZONTAL */}
                                {rowIndex < cityRows.length - 1 && (
                                    <div className="absolute -bottom-[70px] left-0 right-0 h-10 flex items-center justify-center pointer-events-none">
                                    <div className="absolute w-full border-b-2 border-dashed border-white/30"></div>
                                    <div className="bg-green-800 text-white px-4 py-1 rounded border-2 border-white shadow-lg z-20">
                                        <span className="text-xs font-black uppercase tracking-widest">{row.streetName}</span>
                                    </div>
                                    </div>
                                )}
                                
                                {/* Ultima calle */}
                                {rowIndex === cityRows.length - 1 && (
                                    <div className="absolute -bottom-[70px] left-0 right-0 h-10 flex items-center justify-center pointer-events-none">
                                    <div className="bg-green-800 text-white px-4 py-1 rounded border-2 border-white shadow-lg z-20">
                                        <span className="text-xs font-black uppercase tracking-widest">{row.streetName}</span>
                                    </div>
                                    </div>
                                )}

                            </div>
                            ))}
                        </div>

                        </div>
                    </div>
                    
                    {/* Decoración Externa */}
                    <div className="absolute top-20 left-20 opacity-60">
                        <Trees size={64} className="text-[#8ba888]" />
                    </div>
                    <div className="absolute bottom-20 right-20 opacity-60">
                        <Factory size={64} className="text-[#a89f88]" />
                    </div>

                    </div>

                </div>

                {/* Instrucciones */}
                <div className="absolute bottom-6 left-6 bg-slate-900/90 backdrop-blur text-slate-300 p-3 rounded-lg border border-slate-700 text-xs shadow-xl pointer-events-none select-none">
                    <p className="font-bold text-white mb-1">How to use:</p>
                    <ul className="space-y-1">
                    <li>• Click and Drag to move map</li>
                    <li>• Use top buttons to Zoom (+ / -)</li>
                    <li>• Click building A then B to route</li>
                    </ul>
                </div>

                </div>
            );
        };

        const root = createRoot(document.getElementById('root'));
        root.render(<CityMapTrainer />);
    </script>
</body>
</html>